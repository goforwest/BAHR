# =============================================================================
# BAHR - Arabic Poetry Analysis Platform
# Environment Configuration Template
# =============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control!
# Last Updated: November 9, 2025
# Reference: docs/technical/ARCHITECTURE_OVERVIEW.md (Environment Catalog)

# =============================================================================
# CORE APPLICATION
# =============================================================================
PROJECT_NAME=BAHR API
API_VERSION=1.0.0
ANALYSIS_ENGINE_VERSION=1.0.0
LOG_LEVEL=INFO

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://bahr:bahr_dev_password@localhost:5432/bahr_dev

# Database pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis connection URL
# Format: redis://host:port/db
REDIS_URL=redis://localhost:6379/0

# Redis cache settings
CACHE_TTL_ANALYSIS=3600
CACHE_PREFIX=bahr:
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# Secret key for JWT signing (MUST be changed in production!)
# Generate with: openssl rand -hex 32
SECRET_KEY=dev-insecure-key-CHANGE-IN-PRODUCTION

# JWT token expiration
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_COST_FACTOR=12

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=3600

# =============================================================================
# NLP CONFIGURATION
# =============================================================================
# Set to false if CAMeL Tools fails on M1/M2 (fallback to PyArabic only)
NLP_ENABLE_MORPHOLOGY=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Optional: Sentry DSN for error tracking
SENTRY_DSN=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
MAINTENANCE_MODE=false

# =============================================================================
# API CONFIGURATION
# =============================================================================

# API versioning
API_VERSION=v1
API_PREFIX=/api/v1

# Rate limiting (requests per hour per user)
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=3600

# Request size limits (in bytes)
MAX_REQUEST_SIZE=1048576
MAX_VERSE_LENGTH=500

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (set to false in production!)
DEBUG=true

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Application name
APP_NAME=BAHR

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed origins (comma-separated)
# Development: http://localhost:3000,http://localhost:3001
# Production: https://bahr.app,https://www.bahr.app
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Allow credentials
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# ARABIC NLP LIBRARIES
# =============================================================================

# CAMeL Tools data path (optional, uses default if not set)
CAMEL_TOOLS_DATA_PATH=

# NLP processing settings
USE_CAMEL_TOOLS=true
FALLBACK_TO_SIMPLE_NORMALIZER=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry error tracking (optional)
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=development

# Sentry sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# EXTERNAL SERVICES (Optional - for future phases)
# =============================================================================

# Email service (SendGrid, AWS SES, etc.)
EMAIL_SERVICE_PROVIDER=
EMAIL_API_KEY=
EMAIL_FROM_ADDRESS=noreply@bahr.app
EMAIL_FROM_NAME=BAHR Platform

# File storage (AWS S3, Cloudflare R2, etc.)
STORAGE_PROVIDER=local
STORAGE_BUCKET=
STORAGE_REGION=
STORAGE_ACCESS_KEY=
STORAGE_SECRET_KEY=

# Payment gateway (Stripe, etc. - Phase 2+)
PAYMENT_PROVIDER=
PAYMENT_PUBLIC_KEY=
PAYMENT_SECRET_KEY=

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================

# Auto-reload on code changes (development only)
RELOAD=true

# Number of workers (production)
WORKERS=4

# Uvicorn settings
HOST=0.0.0.0
PORT=8000

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# Test database (used when running pytest)
TEST_DATABASE_URL=postgresql://bahr:bahr_test_password@localhost:5432/bahr_test

# Test Redis
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# FEATURE FLAGS (for gradual rollouts)
# =============================================================================

# Enable specific features
FEATURE_USER_REGISTRATION=true
FEATURE_BATCH_ANALYSIS=true
FEATURE_ARABIC_DIACRITIZATION=false

# Prosody engine settings
PROSODY_MAX_METERS=16
PROSODY_CONFIDENCE_THRESHOLD=0.70

# =============================================================================
# PERFORMANCE & OPTIMIZATION
# =============================================================================

# Query timeout (seconds)
QUERY_TIMEOUT=30

# Background task queue
TASK_QUEUE_BACKEND=redis
CELERY_BROKER_URL=redis://localhost:6379/2

# =============================================================================
# NOTES
# =============================================================================
#
# Security Best Practices:
# 1. Generate strong SECRET_KEY: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 2. Use environment-specific .env files (.env.development, .env.production)
# 3. Never commit .env files to version control (add to .gitignore)
# 4. Use secrets management in production (AWS Secrets Manager, HashiCorp Vault)
# 5. Rotate secrets regularly (especially SECRET_KEY, API keys)
#
# Database Connection Strings:
# - Local development: postgresql://user:pass@localhost:5432/dbname
# - Docker: postgresql://user:pass@postgres:5432/dbname
# - Railway: Use DATABASE_URL from Railway dashboard
# - Supabase: Use connection string from Supabase project settings
#
# Redis Connection Strings:
# - Local: redis://localhost:6379/0
# - Docker: redis://redis:6379/0
# - Railway/Upstash: Use REDIS_URL from provider dashboard
#
# =============================================================================
