# Poetry Database Expansion Plan
## Target: 100+ Unique Verses per Meter

**Start Date:** November 14, 2025  
**Target Completion:** December 5, 2025 (3 weeks)  
**Current Status:** 380 verses total (20 per meter)  
**Target:** 2,000+ verses (100+ per meter)  
**Shortfall:** 1,520 verses needed

---

## ğŸ“Š CURRENT STATE ANALYSIS

### Verses per Meter (Current)
```
Ø§Ù„Ø·ÙˆÙŠÙ„              : 20 verses â†’ Need 80 more
Ø§Ù„ÙƒØ§Ù…Ù„              : 20 verses â†’ Need 80 more
Ø§Ù„ÙˆØ§ÙØ±              : 20 verses â†’ Need 80 more
Ø§Ù„Ø¨Ø³ÙŠØ·              : 20 verses â†’ Need 80 more
Ø§Ù„Ø±Ø¬Ø²               : 20 verses â†’ Need 80 more
Ø§Ù„Ø±Ù…Ù„               : 20 verses â†’ Need 80 more
Ø§Ù„Ø®ÙÙŠÙ              : 20 verses â†’ Need 80 more
Ø§Ù„Ø³Ø±ÙŠØ¹              : 20 verses â†’ Need 80 more
Ø§Ù„Ù…Ù†Ø³Ø±Ø­             : 20 verses â†’ Need 80 more
Ø§Ù„Ù…Ù‚ØªØ¶Ø¨             : 20 verses â†’ Need 80 more
Ø§Ù„Ù…Ø¯ÙŠØ¯              : 20 verses â†’ Need 80 more
Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹             : 20 verses â†’ Need 80 more
Ø§Ù„Ù…ØªÙ‚Ø§Ø±Ø¨            : 20 verses â†’ Need 80 more
Ø§Ù„Ù…Ø¬ØªØ«              : 20 verses â†’ Need 80 more
Ø§Ù„Ù‡Ø²Ø¬               : 20 verses â†’ Need 80 more
Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø¬Ø²ÙˆØ¡)      : 20 verses â†’ Need 80 more
Ø§Ù„Ù‡Ø²Ø¬ (Ù…Ø¬Ø²ÙˆØ¡)       : 20 verses â†’ Need 80 more
Ø§Ù„ÙƒØ§Ù…Ù„ (3 ØªÙØ§Ø¹ÙŠÙ„)   : 20 verses â†’ Need 80 more
Ø§Ù„Ø³Ø±ÙŠØ¹ (Ù…ÙØ¹ÙˆÙ„Ø§Øª)    : 20 verses â†’ Need 80 more
```

**Total Needed:** 1,520 additional unique verses

---

## ğŸ¯ EXPANSION STRATEGY

### Phase 1: Research & Source Identification (Week 1)
**Target:** Identify authenticated sources for 1,520 verses

#### Primary Sources (Public Domain)
1. **Ø§Ù„Ø¯ÙˆØ§ÙˆÙŠÙ† Ø§Ù„Ø´Ø¹Ø±ÙŠØ© Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠØ© (Classical Diwans)**
   - Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ (Ø§Ù„Ù…ØªÙ‚Ø§Ø±Ø¨ØŒ Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ø·ÙˆÙŠÙ„)
   - Ø¯ÙŠÙˆØ§Ù† Ø£Ø¨Ùˆ Ù†ÙˆØ§Ø³ (Ù…Ø®ØªÙ„Ù Ø§Ù„Ø¨Ø­ÙˆØ±)
   - Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ø¨Ø­ØªØ±ÙŠ (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)
   - Ø¯ÙŠÙˆØ§Ù† Ø§Ø¨Ù† Ø§Ù„Ø±ÙˆÙ…ÙŠ (Ù…ØªÙ†ÙˆØ¹)
   - Ø¯ÙŠÙˆØ§Ù† Ø£Ø¨Ùˆ ØªÙ…Ø§Ù… (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)
   - Ø¯ÙŠÙˆØ§Ù† Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ† (Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)

2. **Ø§Ù„Ù…Ø¹Ù„Ù‚Ø§Øª ÙˆØ§Ù„Ø´Ø¹Ø± Ø§Ù„Ø¬Ø§Ù‡Ù„ÙŠ**
   - Ø§Ù„Ù…Ø¹Ù„Ù‚Ø§Øª Ø§Ù„Ø¹Ø´Ø± (already partially included)
   - Ø´Ø¹Ø±Ø§Ø¡ Ø§Ù„Ù…ÙØ¶Ù„ÙŠØ§Øª
   - Ø§Ù„Ø£ØµÙ…Ø¹ÙŠØ§Øª

3. **Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø£Ù…ÙˆÙŠ**
   - Ø¬Ø±ÙŠØ± (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„ÙƒØ§Ù…Ù„)
   - Ø§Ù„ÙØ±Ø²Ø¯Ù‚ (Ø§Ù„Ø·ÙˆÙŠÙ„)
   - Ø§Ù„Ø£Ø®Ø·Ù„ (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)
   - Ø¹Ù…Ø± Ø¨Ù† Ø£Ø¨ÙŠ Ø±Ø¨ÙŠØ¹Ø© (Ø§Ù„Ø®ÙÙŠÙØŒ Ø§Ù„ÙƒØ§Ù…Ù„)

4. **Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø¹Ø¨Ø§Ø³ÙŠ**
   - Ø£Ø¨Ùˆ Ø§Ù„Ø¹ØªØ§Ù‡ÙŠØ© (Ø§Ù„Ø±Ø¬Ø²ØŒ Ø§Ù„Ø®ÙÙŠÙØŒ Ø§Ù„ÙƒØ§Ù…Ù„)
   - Ø£Ø¨Ùˆ ÙØ±Ø§Ø³ Ø§Ù„Ø­Ù…Ø¯Ø§Ù†ÙŠ (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„ÙƒØ§Ù…Ù„)
   - Ø§Ø¨Ù† Ø§Ù„Ù…Ø¹ØªØ² (Ù…ØªÙ†ÙˆØ¹)

5. **Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø£Ù†Ø¯Ù„Ø³ÙŠ**
   - Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ† (Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)
   - Ø§Ø¨Ù† Ø®ÙØ§Ø¬Ø© (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„ÙƒØ§Ù…Ù„)
   - Ø§Ø¨Ù† Ø­Ù…Ø¯ÙŠØ³ (Ø§Ù„Ø·ÙˆÙŠÙ„)

6. **Digital Archives (Public Domain)**
   - Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© (Shamela)
   - Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¨ÙŠ (aldiwan.net)
   - Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ

#### Quality Criteria
- âœ… Authenticated classical sources only
- âœ… Public domain or Creative Commons
- âœ… Prosodically verified (correct tafÄÊ¿Ä«l)
- âœ… Complete verses (no fragments)
- âœ… Diverse poet representation (max 5 verses per poet per meter)

---

### Phase 2: Data Collection & Verification (Week 2)
**Target:** Collect and verify 1,520 verses

#### Collection Process

**Step 1: Systematic Extraction**
```python
# For each meter:
# 1. Identify 5-10 major poets known for that meter
# 2. Extract 8-12 verses per poet
# 3. Verify prosodic correctness
# 4. Ensure diversity
```

**Step 2: Prosodic Verification**
- Use existing `analyze_verse()` function from `bahr_api.py`
- Verify each verse matches target meter
- Document any ambiguous cases

**Step 3: Poet Distribution**
- Maximum 5 verses per poet per meter (to maintain 5% threshold)
- Aim for 15-20 different poets per meter
- Prioritize major classical poets

#### Tools Created

1. **`verse_collection_tracker.py`** - Track collection progress
2. **`prosodic_verifier.py`** - Batch verify verses
3. **`poet_distribution_checker.py`** - Ensure balance
4. **`duplicate_checker.py`** - Prevent duplication

---

### Phase 3: Database Integration (Week 3)
**Target:** Integrate and validate 1,520 new verses

#### Integration Process

**Step 1: Expand `poetry_sources.py`**
```python
# For each meter section:
'Ø§Ù„Ø·ÙˆÙŠÙ„': [
    # Existing 20 verses
    {...},
    
    # NEW: Add 80 verified verses
    {
        'text': 'verse_text',
        'poet': 'poet_name',
        'poem': 'poem_title',
        'era': 'era_name',
        'source': 'source_reference'
    },
    # ... (80 more)
]
```

**Step 2: Run Quality Validation**
```bash
# 1. Check for duplicates across all meters
python duplicate_checker.py

# 2. Verify poet distribution
python poet_distribution_checker.py

# 3. Validate prosody
python prosodic_verifier.py

# 4. Run comprehensive evaluation
python evaluate_dataset_quality.py
```

**Step 3: Re-collect Dataset**
```bash
# Clear old batches
rm -rf batches/*.jsonl

# Reset global cache
rm -f global_verse_cache.json

# Collect with expanded database
python batch_collector.py --target 2000

# Verify results
python evaluate_dataset_quality.py
```

---

## ğŸ“… WEEKLY MILESTONES

### Week 1 (Nov 14-20): Research & Planning
- [ ] **Day 1-2:** Identify top 50 poets across all eras
- [ ] **Day 3-4:** Map poets to meters (which poets excel in which meters)
- [ ] **Day 4-5:** Source digital copies of diwans/collections
- [ ] **Day 6-7:** Create extraction tools and verification scripts

**Deliverable:** Database of 50 poets with meter specialties

---

### Week 2 (Nov 21-27): Collection & Verification
- [ ] **Day 1-3:** Extract verses for common meters (Ø§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„ÙˆØ§ÙØ±ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·)
- [ ] **Day 4-5:** Extract verses for medium-frequency meters (Ø§Ù„Ø®ÙÙŠÙØŒ Ø§Ù„Ø±Ù…Ù„ØŒ Ø§Ù„Ø³Ø±ÙŠØ¹)
- [ ] **Day 6-7:** Extract verses for rare meters (Ø§Ù„Ù…Ù‚ØªØ¶Ø¨ØŒ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ØŒ Ø§Ù„Ù‡Ø²Ø¬)

**Deliverable:** 1,520 verified verses in staging area

---

### Week 3 (Nov 28 - Dec 5): Integration & Validation
- [ ] **Day 1-2:** Integrate new verses into `poetry_sources.py`
- [ ] **Day 3:** Run comprehensive quality checks
- [ ] **Day 4:** Fix any issues (duplicates, prosody errors, imbalances)
- [ ] **Day 5:** Re-collect full dataset with expanded database
- [ ] **Day 6:** Final validation and evaluation
- [ ] **Day 7:** Documentation and handoff

**Deliverable:** 2,000+ verse dataset with 100+ per meter

---

## ğŸ› ï¸ TOOLS TO CREATE

### 1. `verse_collection_tracker.py`
**Purpose:** Track collection progress per meter

**Features:**
- Current count per meter
- Target progress (0-100%)
- Poet distribution visualization
- Remaining verses needed

**Usage:**
```bash
python verse_collection_tracker.py --meter Ø§Ù„Ø·ÙˆÙŠÙ„
# Output: Ø§Ù„Ø·ÙˆÙŠÙ„: 45/100 (45%) - Need 55 more verses
```

---

### 2. `prosodic_verifier.py`
**Purpose:** Batch verify verses against target meters

**Features:**
- Load verses from CSV/JSON
- Verify each verse using `analyze_verse()`
- Report mismatches
- Export verified verses

**Usage:**
```bash
python prosodic_verifier.py --input new_verses.csv --meter Ø§Ù„Ø·ÙˆÙŠÙ„
# Output: 80/80 verses verified âœ“
```

---

### 3. `poet_distribution_checker.py`
**Purpose:** Ensure no poet exceeds 5% per meter

**Features:**
- Calculate poet percentages
- Flag violations
- Suggest removals if needed
- Generate balance report

**Usage:**
```bash
python poet_distribution_checker.py
# Output: Warning: Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ has 8 verses (8%) in Ø§Ù„ÙƒØ§Ù…Ù„ - exceeds 5%
```

---

### 4. `duplicate_checker.py`
**Purpose:** Global deduplication across all meters

**Features:**
- Check against existing verses
- Check against new verses
- Fuzzy matching (90% threshold)
- Generate duplicate report

**Usage:**
```bash
python duplicate_checker.py --new new_verses.json
# Output: Found 3 duplicates - verses removed
```

---

### 5. `batch_integration_script.py`
**Purpose:** Semi-automated integration of verified verses

**Features:**
- Read verified verses from staging
- Format for `poetry_sources.py`
- Insert at correct meter section
- Preserve existing verses
- Validate syntax

**Usage:**
```bash
python batch_integration_script.py --meter Ø§Ù„Ø·ÙˆÙŠÙ„ --input verified_tawil.json
# Output: Added 80 verses to Ø§Ù„Ø·ÙˆÙŠÙ„ section
```

---

## ğŸ“š METER-SPECIFIC SOURCING STRATEGY

### High-Frequency Meters (Need 80 each)

#### 1. Ø§Ù„Ø·ÙˆÙŠÙ„ (Most Common)
**Best Sources:**
- Ø§Ù„Ù…Ø¹Ù„Ù‚Ø§Øª Ø§Ù„Ø³Ø¨Ø¹ (already have some)
- Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ (rich in Ø§Ù„Ø·ÙˆÙŠÙ„)
- Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ø¨Ø­ØªØ±ÙŠ
- Ø´Ø¹Ø± Ø§Ù„ÙØ±Ø²Ø¯Ù‚ ÙˆØ¬Ø±ÙŠØ±
- **Target Poets:** Ø§Ù…Ø±Ø¤ Ø§Ù„Ù‚ÙŠØ³ØŒ Ø§Ù„Ù…ØªÙ†Ø¨ÙŠØŒ Ø§Ù„Ø¨Ø­ØªØ±ÙŠØŒ Ø§Ù„ÙØ±Ø²Ø¯Ù‚ØŒ Ø¬Ø±ÙŠØ±ØŒ Ø²Ù‡ÙŠØ±ØŒ Ø·Ø±ÙØ©ØŒ Ø¹Ù†ØªØ±Ø©

#### 2. Ø§Ù„ÙƒØ§Ù…Ù„ (Very Common)
**Best Sources:**
- Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ø¨Ø­ØªØ±ÙŠ
- Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ
- Ø´Ø¹Ø± Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ†
- **Target Poets:** Ø§Ù„Ø¨Ø­ØªØ±ÙŠØŒ Ø§Ù„Ù…ØªÙ†Ø¨ÙŠØŒ Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ†ØŒ Ø£Ø¨Ùˆ ØªÙ…Ø§Ù…ØŒ Ø£Ø¨Ùˆ Ù†ÙˆØ§Ø³

#### 3. Ø§Ù„ÙˆØ§ÙØ± (Common)
**Best Sources:**
- Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø¬Ø§Ù‡Ù„ÙŠ
- Ø¯ÙŠÙˆØ§Ù† Ø§Ø¨Ù† Ø§Ù„Ø±ÙˆÙ…ÙŠ
- **Target Poets:** Ø§Ù„Ù†Ø§Ø¨ØºØ© Ø§Ù„Ø°Ø¨ÙŠØ§Ù†ÙŠØŒ Ø¹Ù„Ù‚Ù…Ø© Ø§Ù„ÙØ­Ù„ØŒ Ø§Ø¨Ù† Ø§Ù„Ø±ÙˆÙ…ÙŠ

#### 4. Ø§Ù„Ø¨Ø³ÙŠØ· (Common)
**Best Sources:**
- Ø¯ÙŠÙˆØ§Ù† Ø£Ø¨Ùˆ ØªÙ…Ø§Ù…
- Ø¯ÙŠÙˆØ§Ù† Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ†
- **Target Poets:** Ø£Ø¨Ùˆ ØªÙ…Ø§Ù…ØŒ Ø§Ø¨Ù† Ø²ÙŠØ¯ÙˆÙ†ØŒ Ø£Ø¨Ùˆ ÙØ±Ø§Ø³

---

### Medium-Frequency Meters (Need 80 each)

#### 5-7. Ø§Ù„Ø®ÙÙŠÙØŒ Ø§Ù„Ø±Ù…Ù„ØŒ Ø§Ù„Ø³Ø±ÙŠØ¹
**Best Sources:**
- Ø¯ÙŠÙˆØ§Ù† Ø£Ø¨Ùˆ Ø§Ù„Ø¹ØªØ§Ù‡ÙŠØ© (Ø§Ù„Ø±Ø¬Ø² ÙˆØ§Ù„Ø®ÙÙŠÙ)
- Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø¹Ø¨Ø§Ø³ÙŠ
- Ø§Ù„Ù…ÙˆØ´Ø­Ø§Øª Ø§Ù„Ø£Ù†Ø¯Ù„Ø³ÙŠØ© (Ø§Ù„Ø±Ù…Ù„)

---

### Rare Meters (Need 80 each)

#### 8-15. Ø§Ù„Ù…Ù‚ØªØ¶Ø¨ØŒ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ØŒ Ø§Ù„Ù‡Ø²Ø¬ØŒ etc.
**Strategy:**
- Search specialized collections
- Focus on Ø¹ØµØ± Ø§Ù„Ø¹Ø¨Ø§Ø³ÙŠ (more experimental)
- May need lower target (60-80 instead of 100)

---

## ğŸš¨ QUALITY CONTROL CHECKPOINTS

### Checkpoint 1: After 500 Verses
- Run `duplicate_checker.py`
- Run `poet_distribution_checker.py`
- Run `prosodic_verifier.py`
- **Decision Point:** Proceed or adjust strategy

### Checkpoint 2: After 1000 Verses
- Run comprehensive evaluation
- Check meter balance (some meters may be harder to source)
- **Decision Point:** Adjust targets for rare meters if needed

### Checkpoint 3: Before Integration
- Final deduplication check
- Final prosodic verification
- Final poet balance check
- **Decision Point:** Go/No-go for integration

---

## ğŸ“Š SUCCESS METRICS

### Quantitative
- âœ… **Total verses:** 2,000+ (target: 2,000-2,200)
- âœ… **Per meter:** 100+ (minimum acceptable: 80)
- âœ… **Poet diversity:** 15-20 poets per meter
- âœ… **Max poet percentage:** <5% per poet per meter
- âœ… **Duplication rate:** 0%
- âœ… **Prosodic accuracy:** 100%

### Qualitative
- âœ… All sources authenticated and public domain
- âœ… Classical poets (pre-1900) preferred
- âœ… Complete verses (no fragments)
- âœ… Diverse eras represented
- âœ… High literary quality

---

## ğŸ¯ IMMEDIATE NEXT STEPS (Today)

### Step 1: Create Collection Tools (2 hours)
```bash
cd /Users/hamoudi/Desktop/Personal/BAHR/ml_dataset

# Create tracking and verification tools
python create_collection_tools.py
```

**Creates:**
- `verse_collection_tracker.py`
- `prosodic_verifier.py`
- `poet_distribution_checker.py`
- `duplicate_checker.py`
- `batch_integration_script.py`

### Step 2: Create Staging Area (5 minutes)
```bash
# Create directories for organized collection
mkdir -p expansion_staging/{raw,verified,rejected}
mkdir -p expansion_staging/by_meter
```

### Step 3: Identify Top Sources (1 hour)
- Download or access digital diwans
- Create source reference list
- Document access methods

### Step 4: Start Collection (Rest of Day)
- Begin with Ø§Ù„Ø·ÙˆÙŠÙ„ (easiest, most sources)
- Target: 30-40 verses today
- Verify and stage

---

## ğŸ“ DOCUMENTATION

### Files to Maintain
1. **`EXPANSION_LOG.md`** - Daily progress log
2. **`SOURCES_REFERENCE.md`** - Bibliography of all sources used
3. **`POET_CATALOG.md`** - All poets with verse counts
4. **`ISSUES_LOG.md`** - Problems encountered and solutions

---

## âš ï¸ RISK MITIGATION

### Risk 1: Insufficient Sources for Rare Meters
**Mitigation:** 
- Lower target to 60-80 for rare meters
- Use variant forms (Ù…Ø¬Ø²ÙˆØ¡ØŒ Ù…Ø­Ø°ÙˆÙ)
- Consult specialized collections

### Risk 2: Poet Imbalance
**Mitigation:**
- Monitor distribution daily
- Set hard limit: max 5 verses per poet per meter
- Diversify sources continuously

### Risk 3: Prosodic Errors
**Mitigation:**
- Verify EVERY verse before staging
- Double-check rare meters
- Maintain rejected verse log for learning

### Risk 4: Timeline Slip
**Mitigation:**
- Focus on high-frequency meters first
- Accept lower targets for rare meters if needed
- Parallel processing where possible

---

## ğŸ“ LEARNING OBJECTIVES

By end of this expansion:
1. Deep understanding of poet-meter relationships
2. Comprehensive knowledge of classical Arabic poetry sources
3. Expertise in prosodic verification
4. Mastery of dataset quality control

---

**Ready to begin?** Let's create the collection tools first! ğŸš€
